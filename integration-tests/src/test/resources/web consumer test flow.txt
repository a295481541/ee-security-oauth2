+---------------+                                                                                                                     
|  Test Client  |          +-----------------------+    +--------------------------+    +--------------------+    +--------------+    +----------------+    +--------------------------+    
| Role:Consumer |          |  EndUserLoginAccount  |    |  EENetEndUserCredential  |    |  ThirdPartySSOApp  |    |  SSO System  |    |  SingleSignOn  |    |  IdentityAuthentication  |    +------------------+
|   3rdSSOApp   |          |  BizService           |    |  BizService              |    |  BizService        |    | (Just Mock)  |    |  BizService    |    |  BizService              |    |  MockBizService  |
+---------------+          +-----------------------+    +--------------------------+    +--------------------+    +--------------+    +----------------+    +--------------------------+    +------------------+
        |                              |                               |                           |                     |                     |                           |                           |
        |  registeEndUserLoginAccount  |                               |                           |                     |                     |                           |                           |
        |----------------------------->|                               |                           |                     |                     |                           |                           |
        |                              |   initUserLoginPassword       |                           |                     |                     |                           |                           |
        |------------------------------------------------------------->|                           |                     |                     |                           |                           |
        |                              |                               |  registeThirdPartySSOApp  |                     |                     |                           |                           |
        |----------------------------------------------------------------------------------------->|                     |                     |                           |                           |
        |                              |                               |                           |   getSignOnGrant   +-+                    |                           |                           |
        |-------------------------------------------------------------------------------------------------------------->| |   getSignOnGrant   |                           |                           |
        |  return:SignOnGrant          |                               |                           |                    | |------------------->|                           |                           |
        |<--------------------------------------------------------------------------------------------------------------| |                    |                           |                           |
        |                              |                               |                           |                    +-+                    |                           |                           |
        |                              |                               |                           |                     |    getAccessToken   |                           |                           |
        |------------------------------------------------------------------------------------------------------------------------------------->|                           |                           |
        |                              |                               |                           |                     |                     |                           |               doBiz:xxx  +-+
        |-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------->| |
        |                              |                               |                           |                     |                     |                           |                          | |
        |                              |                               |                           |                     |                     |                          +-+  endUserAuthen          | |
        |                              |                               |                           |                     |                     |                          | |<------------------------| |
        |                              |                               |                           |                     |                     |                          | |------------------------>| |--+
        |                              |                               |                           |                     |                     |                          +-+          True           | |  |
        |                              |                               |                           |                     |                     |                           |                          | |<-+
        |                              |                               |                           |                     |                     |                           |                          | |
        |                              |                               |                           |                     |                     |                           |                          +-+
        |                              |                               |                           |                     |  refreshAccessToken |                           |                           |
        |------------------------------------------------------------------------------------------------------------------------------------->|                           |                           |
        |                              |                               |                           |                     |                     |                           |               doBiz:xxx  +-+
        |-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------->| |
        |                              |                               |                           |                     |                     |                           |                          | |
        |                              |                               |                           |                     |                     |                          +-+  endUserAuthen          | |
        |                              |                               |                           |                     |                     |                          | |<------------------------| |
        |                              |                               |                           |                     |                     |                          | |------------------------>| |--+
        |                              |                               |                           |                     |                     |                          +-+           True          | |  |
        |                              |                               |                           |                     |                     |                           |                          | |<-+
        |                              |                               |                           |                     |                     |                           |                          | |
        |                              |                               |                           |                     |                     |                           |                          +-+
        |                              |                               |  removeThirdPartySSOApp   |                     |                     |                           |                           |
        |----------------------------------------------------------------------------------------->|                     |                     |                           |                           |
        |                              |                               |                           |                     |                     |                           |                           |
        |                              |   removeEndUserLoginAccount   |                           |                     |                     |                           |                           |
        |------------------------------------------------------------->|                           |                     |                     |                           |                           |
        |                              |                               |                           |                     |                     |                           |               doBiz:xxx  +-+
        |-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------->| |
        |                              |                               |                           |                     |                     |                           |                          | |
        |                              |                               |                           |                     |                     |                          +-+  endUserAuthen          | |
        |                              |                               |                           |                     |                     |                          | |<------------------------| |
        |                              |                               |                           |                     |                     |                          | |------------------------>| |--+
        |                              |                               |                           |                     |                     |                          +-+         False           | |  |
        |                              |                               |                           |                     |                     |                           |                          | |<-+
        |                              |                               |                           |                     |                     |                           |                          | |
        |                              |                               |                           |                     |                     |                           |                          +-+
        |                              |                               |                           |                     |                     |                           |                           |
        
